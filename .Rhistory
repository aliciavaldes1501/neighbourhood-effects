ants_T<-read.table("./data/raw/tanga2016_ants.txt",header=T,sep="\t",dec=".")
head(ants_T)
with(ants_T,hist(Mrubra))
with(ants_T,table(Mrubra))
with(ants_T,table(Mrubra,Mscabrinodis))
head(ants_T)
?barplot
with(ants_T,barplot(Mrubra))
with(ants_T,barplot(sum(Mrubra)))
with(ants_T,barplot(c(sum(Mrubra),sum(Mscabrinodis))))
ggplot(ants_T, aes(Mrubra,Mscabrinodis))
library(ggplot2)
ggplot(ants_T, aes(Mrubra,Mscabrinodis))
ggplot(ants_T)+geom_bar(Mrubra)
ggplot(ants_T,aes(Mrubra))+geom_bar(Mrubra)
ggplot(ants_T,aes(Mrubra))+geom_bar(Mrubra)
library(tidyr)
?gather
head(ants_T)
ants_T_long<-gather(ants_T,species,number,Mrubra,Mscabrinodis,Mruginodis,Mschencki,others,factor_key=TRUE)
install.packages("DBI")
library(tidyr)
r
ants_T_long<-gather(ants_T,species,number,Mrubra,Mscabrinodis,Mruginodis,Mschencki,others,factor_key=TRUE)
ants_T_long
head(ants_T)
head(ants_T_long)
str(ants_T)
str(ants_T_long)
ants_T_long$point_id<-as.factor(ants_T_long$point_id)
head(ants_T_long)
ants_T_long$point_id<-as.factor(ants_T_long$point_id)
str(ants_T_long)
ggplot(ants_T_long,aes(species,number))
ggplot(ants_T_long,aes(x=species,y=number,fill=species))
ggplot(ants_T_long,aes(x=species,y=number,fill=species))+geom_bar(stat="identity")
ggplot(ants_T_long,aes(x=species,y=number,fill=species))+geom_bar(stat="identity")+guides(fill=FALSE)
ggplot(ants_T_long,aes(x=species,y=number,fill=species))+geom_bar(stat="identity")+guides(fill=FALSE)ants_T
with(ants_T,sum(Mruginodis))
head(ants_T)
head(ants_T_long)
?spread
ants_T_wide <- spread(ants_T, date, Mrubra,Mscabrinodis)
ants_T_wide <- spread(ants_T, date, c(Mrubra,Mscabrinodis))
head(spread(ants_T, date, Mrubra))
spread(ants_T, date, Mrubra,drop=F)
head(spread(ants_T, date, Mrubra,drop=F))
head(spread(ants_T_long, date,species))
head(spread(ants_T_long, date,number))
ants_T_long_wide <- spread(ants_T_long, date,number)
?ifelse
ants_T_long$date_id<-ifelse(ants_T_long$date=="03/09/2016",2,1)
str(ants_T_long)
ants_T_long$date_id<-as.factor(ifelse(ants_T_long$date=="03/09/2016",2,1))
str(ants_T_long)
ants_T_long_wide <- spread(ants_T_long,date_id,number)
head(ants_T_long)
ants_T_long_wide <- spread(ants_T_long,species,number)
ants_T_long_wide <-dcast(ants_T_long, point_id + species ~ date_id, value.var="number")
library(reshape2)
ants_T_long_wide <-dcast(ants_T_long, point_id + species ~ date_id, value.var="number")
ants_T_long_wide <-dcast(ants_T_long, point_id + species ~ date_id, value.var="number")
head(ants_T_long_wide)
?dcast
ants_T_long_wide <-dcast(ants_T_long, point_id + species ~ date, value.var="number")
head(ants_T_long_wide)
ants_T_long_wide <-dcast(ants_T_long, point_id + species ~ date, value.var="number",fun.aggregate=mean)
head(ants_T_long_wide)
ants_T_long_wide <-dcast(ants_T_long, point_id + species ~ date, value.var="number",fun.aggregate=sum)
head(ants_T_long_wide)
head(ants_T)
head(ants_T_long_wide)
ants_T_long_wide
ants_T_long$date_id<-as.factor(ifelse(ants_T_long$date=="03/09/2016","date2","date1"))
ants_T_long_wide <-dcast(ants_T_long, point_id + species ~ date, value.var="number",fun.aggregate=sum)
head(ants_T_long_wide)
ants_T_long_wide <-dcast(ants_T_long, point_id + species ~ date_id, value.var="number",fun.aggregate=sum)
head(ants_T_long_wide)
ants_T_long_wide
View(ants_T)
View(ants_T)
head(ants_T_long)
ants_T_long_wide$sumdates<-ants_T_long_wide$date1+ants_T_long_wide$date2
head(ants_T_long_wide)
ants_T_long_wide$pres<-as.factor(ifelse(ants_T_long_wide>0,1,0))
ants_T_long_wide$pres<-as.factor(ifelse(ants_T_long_wide$sumdates>0,1,0))
head(ants_T_long_wide)
head(dcast(ants_T_long_wide, point_id ~ species, value.var="pres"))
ants_pres<-dcast(ants_T_long_wide, point_id ~ species, value.var="pres")
head(ants_pres)
str(ants_pres)
rm(ants_pres)
ants_T_pres<-dcast(ants_T_long_wide, point_id ~ species, value.var=as.factor("pres"))
head(ants_T_pres)
str(ants_T_pres)
ants_T_pres<-dcast(ants_T_long_wide, point_id ~ species, value.var="pres")
ants_T_pres$Mrubra<-as.factor(ants_T_pres$Mrubra)
ants_T_pres$Mscabrinodis<-as.factor(ants_T_pres$Mscabrinodis)
ants_T_pres$Mruginodis<-as.factor(ants_T_pres$Mruginodis)
ants_T_pres$Mschencki<-as.factor(ants_T_pres$Mschencki)
ants_T_pres$others<-as.factor(ants_T_pres$others)
head(ants_T_pres)
str(ants_T_pres)
head(ants_T_long)
head(ants_T_long)
head(ants_T_long_wide)
head(ants_T_pres)
ggplot(ants_T_long_wide,aes(x=species,y=pres,fill=species))+geom_bar(stat="identity")+guides(fill=FALSE)
rm(ants_T_pres)
ggplot(ants_T_long_wide,aes(x=species,y=pres,fill=species))+geom_bar(stat="sum")+guides(fill=FALSE)
head(ants_T_long_wide)
ggplot(ants_T_long_wide,aes(x=species,y=pres,fill=species))+geom_bar(stat="count")+guides(fill=FALSE)
ggplot(ants_T_long_wide,aes(x=species,fill=species))+geom_bar(stat="count")+guides(fill=FALSE)
ggplot(ants_T_long_wide,aes(x=species,y=pres,fill=species))+geom_bar(stat="identity")+guides(fill=FALSE)
ggplot(ants_T_long_wide,aes(x=species,y=sum(pres),fill=species))+geom_bar(stat="identity")+guides(fill=FALSE)
ants_T_long_wide$pres<-ifelse(ants_T_long_wide$sumdates>0,1,0)
ggplot(ants_T_long_wide,aes(x=species,y=pres,fill=species))+geom_bar(stat="identity")+guides(fill=FALSE)
ggplot(ants_T_long,aes(x=species,y=number,fill=species))+geom_bar(stat="identity")+guides(fill=FALSE)
ggplot(ants_T_long,aes(x=species,y=number,fill=species))+geom_bar(stat="identity")+guides(fill=FALSE)
ggplot(ants_T_long,aes(x=species,y=number,fill=species))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")
ggplot(ants_T_long,aes(x=species,y=number,fill=species))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Total number of individuals")
ggplot(ants_T_long_wide,aes(x=species,y=pres,fill=species))+geom_bar(stat="identity")+guides(fill=FALSE
)
ggplot(ants_T_long_wide,aes(x=species,y=pres,fill=species))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Number of points with presence")
ggplot(ants_T_long_wide,aes(x=species,y=pres))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Number of points with presence")
ggplot(ants_T_long,aes(x=species,y=number))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Total number of individuals")
ggplot(ants_T_long,aes(x=species,y=number))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Total number of individuals")+theme_base()
library(ggthemes)
ggplot(ants_T_long,aes(x=species,y=number))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Total number of individuals")+theme_base()
ggplot(ants_T_long,aes(x=species,y=number))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Total number of individuals")+
theme_base()+theme(plot.background=element_rect(fill="white", colour=NA))
pdf("./results/figures/total_indiv_ants.pdf", family="Times",width=7,height=3)
ggplot(ants_T_long,aes(x=species,y=number))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Total number of individuals")+
theme_base()+theme(plot.background=element_rect(fill="white", colour=NA))
dev.off()
ggplot(ants_T_long,aes(x=species,y=number))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Total number of individuals")+
theme_base()+theme(plot.background=element_rect(fill="white", colour=NA))
ggplot(ants_T_long_wide,aes(x=species,y=pres))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Number of points with presence")+
theme_base()+theme(plot.background=element_rect(fill="white", colour=NA))
pdf("./results/figures/total_indiv_ants.pdf", family="Times")
ggplot(ants_T_long,aes(x=species,y=number))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Total number of individuals")+
theme_base()+theme(plot.background=element_rect(fill="white", colour=NA))
ggplot(ants_T_long_wide,aes(x=species,y=pres))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Number of points with presence")+
theme_base()+theme(plot.background=element_rect(fill="white", colour=NA))
dev.off()
pdf("./results/figures/ant_counts.pdf", family="Times")
ggplot(ants_T_long,aes(x=species,y=number))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Total number of individuals")+
theme_base()+theme(plot.background=element_rect(fill="white", colour=NA))
ggplot(ants_T_long_wide,aes(x=species,y=pres))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Number of points with presence")+
theme_base()+theme(plot.background=element_rect(fill="white", colour=NA))
dev.off()
pdf("./results/figures/ant_counts_T.pdf", family="Times")
ggplot(ants_T_long,aes(x=species,y=number))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Total number of individuals")+
theme_base()+theme(plot.background=element_rect(fill="white", colour=NA))
ggplot(ants_T_long_wide,aes(x=species,y=pres))+geom_bar(stat="identity")+guides(fill=FALSE)+
xlab("Species")+ylab("Number of points with presence")+
theme_base()+theme(plot.background=element_rect(fill="white", colour=NA))
dev.off()
